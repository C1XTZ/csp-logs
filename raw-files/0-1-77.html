
<!-- saved from url=(0037)https://acstuff.ru/patch/?info=0.1.77 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><div class="version-block"><h3>v0.1.77</h3><ul><li>Version ID: 1937</li><li>Tags: <span class="tag tag-untested">untested</span></li><li>Size: 61.64 MB</li></ul><h4>Changelog:</h4><div class="changelog markdown"><ul>
<li>New server options:
<ul>
<li>New method to calculate wheel positions for remote cars, should be somewhat better if remote car has jumped or flipped (optional);</li>
<li>Also with that new method, server can optionally let clients exchange data on toe and camber for more accurate wheels positioning;</li>
<li>And also, new method might reduce CPU load for clients;</li>
<li>Make disconnected cars visible;</li>
<li>Adjust amount of those spectating 2D people in stands;</li>
<li>Limit controls lock time;</li>
<li>Force headlights for all cars without making server CSP-only;</li>
<li>Stop some pitlanes from counting towards serving drivethrough penalty (for example, secondary pitlane on Spa);</li>
<li>Configure collisions between cars (make them softer, stiffer, bouncier, etc.; depends on what the server might need);</li>
<li>Enable lap invalidation for laps with car going through pits;</li>
<li>Verify integrity of miscellaneous Assetto Corsa files;</li>
<li>Force specific CSP modules to be active;</li>
<li>To extended previously added <code>NO_BACK_TO_PITS</code>: now possible to allow to use pits for cars that are already in their pit position (for accessing setups);</li>
</ul></li>
<li>GamepadFX:
<ul>
<li>New module altering gamepad inputs with a Lua script implementing new control schemes or simply acting like an assist;</li>
<li>New script “Custom” by Dmitrii A. which uses forces acting on steering wheel;</li>
</ul></li>
<li>GUI:
<ul>
<li>New look for pause menu with built-in photo mode (for now disabled by default);</li>
<li>Option to use controllers (such as wheels or gamepads) to move mouse cursor and select things;</li>
</ul></li>
<li>Loading screen:
<ul>
<li>Animations that don’t cover the whole screen no longer move, with an option to fill empty areas with blurred version;</li>
<li>Better compatibility with custom screenshot names (strict search now disabled by default, names checking improved);</li>
<li>Recursive screenshots search if strict search is disabled;</li>
<li>Fading for optional slideshow;</li>
</ul></li>
<li>Keyboard input method:
<ul>
<li>Smooth transition for toggling mouse steering to make sure suspension would not get damaged;</li>
<li>Mouse steering: options to shift with 4th and 5th buttons or mouse wheel, pause if window is not in focus now applies to acceleration and braking as well;</li>
</ul></li>
<li>Graphics Adjustments:
<ul>
<li>VHS filter has been replaced with new scriptable filters system allowing to create dynamic post-processing filters with Lua;</li>
<li>New Tunnel Effect filter adding a bit of radial blur with speed and B&amp;W effect for crashes;</li>
<li>New vintage filter trying to recreate style of old footage;</li>
</ul></li>
<li>TyresFX:
<ul>
<li>Extra visual effect for wear showing up with driven distance;</li>
<li>New look for blown tyres;</li>
</ul></li>
<li>WeatherFX:
<ul>
<li>Seasonal adjustments (that winter look) are disabled by default, can be re-enabled in WeatherFX settings;</li>
<li>Updated sky texture and stars brightness computation in default WeatherFX script;</li>
<li>Overcast and light pollution in default WeatherFX script are updated;</li>
<li>Weather scripts now can control sun specular intensity separately and use masks to cover moon and stars when using cloud domes;</li>
</ul></li>
<li>Custom car physics:
<ul>
<li>Link engine torque and malfunction chance to engine damage with a LUT;</li>
<li>Add physics Lua script with read and write access to car inputs and few other things (can be used for creating various automatic gearboxes, launch controls, different ways to control a car, etc.);</li>
</ul></li>
<li>Custom track physics:
<ul>
<li>Define new faster custom colliders in “surfaces.ini”, such as capsules, cylinders, boxes, spheres and planes;</li>
<li>For configuring time, use live reload for collision parameters and new custom colliders;</li>
</ul></li>
<li>New SkidmarksFX implementation (fully reworked to improve visuals and performance):
<ul>
<li>Cars leave traces in dirt and sand (outside of track);</li>
<li>Blown tyres leave scratches;</li>
<li>Dynamically extending elements to make sure traces would not get detached from their wheels;</li>
<li>Optional advanced blending (forcing new marks to wipe out previous ones instead of adding up);</li>
<li>Option to save skidmarks between races;</li>
<li>Car configs can adjust skidmarks opacity and tint;</li>
</ul></li>
<li>When blown, tyres release a bit of dust particles;</li>
<li>Updated look for sparks, simpler and more consistent to try and prevent sparks from looking mad;</li>
<li>ExtraFX: TAA update, now with a new option to increase resulting sharpness without relying on sharpening in post-process;</li>
<li>Hotkeys to adjust Real Mirror mirrors (with extra options in Small Tweaks settings);</li>
<li>Hotkeys to move onboard camera around during the race (with extra options in Small Tweaks settings);</li>
<li>Alter yaw of onboard camera as well (currently, by using either hotkeys or a Lua app);</li>
<li>Cache for computed meshes metadata (bounding spheres and more) to speed up loading;</li>
<li>Faster loading for DXT1/3/5 and RGBA8888 DDS textures (experimental, disabled by default);</li>
<li>Clicking on meshes now works in VR (option to choose which eye to use, or use middle point of both of them);</li>
<li>Built-in script recreating some sort of Android Auto OS, can be easily added to car configs (with support for additional custom apps);</li>
<li>Mesh data compression now uses LZ4 compression to speed up loading;</li>
<li>Custom physics: alternative option for worn tyres to pop;</li>
<li>Dust particles change color with seasonal adjustments (if set in track config);</li>
<li>New rendering method for spectators (with shadows and faster), with an option for spectators to use camera flashes;</li>
<li>Option to control font scale with new name tags;</li>
<li>Option for angle of looking back for Neck FX;</li>
<li>Option for loading information to show on middle screen only with triple screen;</li>
<li>Option for chromatic aberrations to apply in all views but first person one (by default it’s only active with track cameras);</li>
<li>Fix for crashing Discord overlay (can be disabled in General settings just in case);</li>
<li>Small Tweaks: option to hide standind spectators;</li>
<li>Sun position for sun rays now computed differently, with better support for VR and triple;</li>
<li>Graphics Adjustments: accessible options for clip planes in VR, default far clip plane value fixed;</li>
<li>Splitscreen mode: support for two separate mouse devices if both control presets use keyboard input method, working mirrors;</li>
<li>New accurate moon texture;</li>
<li>Nearest car now casts highly detailed dynamic shadows (number of cars can be increase in settings);</li>
<li>NeckFX now works for other cars online and in replays;</li>
<li>Option to disable Ctrl+P hotkey (enabled by default);</li>
<li>Option to get AIs to drive faster with some three-wheelers with short rear axle;</li>
<li>Few tweaks for new smoke dynamics and shading.</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Windows 7 support is fixed (especially sorry about that one, didn’t mean to do it);</li>
<li>Stereo mirrors in VR fixed;</li>
<li>ExtraFX: overly blurred with some configurations (and not really working in general as intended) TAA fixed;</li>
<li>Overly bright extra lights in and on some modded cars fixed (now light-to-emissive-bounding behaviour automatically switches to an older buggy version for mods that need it);</li>
<li>Fixed overly bright light cast by sparks with ExtraFX and screen-space lights;</li>
<li>Failing to load textures from ZIP files fixed;</li>
<li>Broken in some occasions solid color textures (for example, messing up Toyota GT86) fixed;</li>
<li>Black windscreen dirt in some combination of settings with some cars fixed;</li>
<li>Live WeatherFX controller fixed;</li>
<li>Telltale reset button binding is fixed;</li>
<li>Drive-through penalties set for speeding up in pits resetting when leaving pits in some circumstances fixed;</li>
<li>Windscreen wipers shaking with speed fixed (could lead to strange jumping with some configurations before);</li>
<li>Removing meshes with extension script leading to sometimes AC crashing on launch fixed;</li>
<li>WeatherFX: reflection brightness and saturation adjustments now apply to SSLR as well, unloading textures fixed;</li>
<li>ExtraFX: a few issues with SSLR leading to overly dark reflections in fog and similar issues are fixed;</li>
<li>TyresFX: shading for damaged tyres fixed;</li>
<li>Dynamic shadows remaining from disconnected cars fixed;</li>
<li>Dynamic shadows cast from meshes invisible with alpha testing (for example, Santa Monica Mountains) or because of world detail level fixed;</li>
<li>Dynamic shadows optimized and improved with proper gaussian blur;</li>
<li>Driver VAO would no longer be applied with custom driver model replaced via an extension config;</li>
<li>Setting UI scale would no longer mess up navigators and such;</li>
<li>Issue with track displays sometimes crashing the game during loading fixed;</li>
<li>Driver hiding before the start of the race fixed (now hiding seatbelt and switching vertex AO set);</li>
<li>Nice screenshots: ETA text format fixed, quality of rear view mirrors fixed;</li>
<li>Changing master audio level live fixed;</li>
<li>Custom physics: ballast fixed;</li>
<li>Virtual mirror sometimes disappearing (for example, with original smoke particles) fixed;</li>
<li>Issue with overly bright lights (above 60000 in brightness) producing black artifacts fixed;</li>
<li>Server option allowing clients to drive in wrong way now works even for clients with “New Behaviour” module disabled;</li>
<li>New starting camera trajectories no longer result in messed up visuals with flying grass and such;</li>
<li>Extended physics turbo not showing up negative pressure properly fixed;</li>
<li>Bug with some cars with extended physics not driving forward because of unfortunate comment in “engine.ini” fixed properly (previous fix only worked with cars without packed data);</li>
<li>Video players now initialize in background to make sure there wouldn’t be a lag;</li>
<li>Distant emissives not working if mesh was loaded from an additional KN5 fixed;</li>
<li>Distant emissives area glow now works with origin shift;</li>
<li>TAA in refracting headlights not always functioning properly (and causing headlights to look dimmer than they should have) fixed;</li>
<li>Refracting lights generating messed up internal normal map in some cases fixed;</li>
<li>New UI: simplified transparency fixed;</li>
<li>VHS filter is compatible with CAS now;</li>
<li>Partial live reloading for cars and tracks fixed (now working better with generic configs);</li>
<li>Improved multi-user inputs support (for example, in split-screen mode secondary user now can use CSP keyboard input tweaks and such);</li>
<li>New Modes crash fixed;</li>
<li>Teleport destinations fixed: issues with scrolling, crash with too many elements;</li>
<li>Bug with optional car parts misbehaving with distance fixed;</li>
<li>New flames: interior audio fixed;</li>
<li>Triple mode tweaks: driver name tag for nearest car is hidden now;</li>
<li>Clicking on scene (for example, for auto-focus) in triple fixed;</li>
<li>Grass culling in triple screen mode fixed;</li>
<li>Visually adjustable wings are synced online now;</li>
<li>Splitscreen mode: improved support for multiple wheels, flickering, shadows and few other issues fixed;</li>
<li>Cars ABS not accessible from setup menu if present but not active by default fixed;</li>
<li>Smoke, other particle effects and occlusion on tyres for remote cars online fixed;</li>
<li>Issue with glass meshes getting lit up from the back too much with VAO patches fixed;</li>
<li>Assetto Corsa no longer crashes when activating AI for main car without preferred tyres set;</li>
<li>Smoke works properly with disabled soft particles;</li>
<li>Smoke brightness fixed;</li>
<li>Bug with AC rarely loading into black screen until PP filter is changed fixed (hopefully);</li>
<li>Unlinking digits from turbo adjustment now no longer stops other AC functions bound to digits;</li>
<li>Enabling AI driver when using mouse steering now stops hiding mouse cursor;</li>
<li>Fixed issue with new chat in start menu if new UI scale is not 100%;</li>
<li>Car input <code>SPEEDLIMITER</code> now reacts to manually enabled pits speed limiter;</li>
<li>Escape-to-unpause no longer unpauses AC if there is another window in foreground;</li>
<li>A few smaller fixes and stability improvements.</li>
</ul>
<p>Configs:</p>
<ul>
<li>Track configs:
<ul>
<li>Changing of dynamic shadows casting property now applies live;</li>
<li>Specify flammable materials (with extra visual effect for burning bales of hay, already added by default to “Material_Bale” from “materials_track”);</li>
<li>Link dirt, grass and dust color to conditions (or use <code>[BASIC] USE_WINTER_DIRT_COLOR = 1</code> to apply default seasonal adjustment transition);</li>
<li>Apply extra blur to dynamic shadows with <code>SHADOWS_EXTRA_BLUR = 1</code>;</li>
<li>Turn flat spectators made with “ksPerPixelAT” shader and such to regular particle-driven spectators to benefit from new way of rendering spectators;</li>
<li>Stop new spectators from using flashes with <code>[SPECTATORS] FLASHES = 0</code>;</li>
</ul></li>
<li>Car configs:
<ul>
<li>Use expressions for car inputs referring to several values at once or outputs of other shared inputs;</li>
<li>New way to write extended digital instruments: use <code>[DIGITAL_INSTRUMENT_OVERRIDE_...]</code> with <code>INPUT</code>;</li>
<li>Hide specific digital text nodes;</li>
<li>Navigators: add map offset if camera should not be centered on the screen;</li>
<li>Options to offset generated wheel shadows with Fake Shadows FX;</li>
<li>Interior PBR materials now support skinned meshes (for regular and cloth materials);</li>
</ul></li>
<li>New functions for car input and track condition expressions: <code>max()</code>, <code>min()</code>, <code>smoothstep()</code>, <code>remap()</code>, <code>saturate()</code> and few more;</li>
<li>New option for <code>ksPerPixelMultiMap_AT</code> shader: set <code>extUseDiffuseAlpha</code> to 1 to swap roles for alphas of <code>txDiffuse</code> and <code>txNormal</code>;</li>
<li>Minimum lights range reduced from 10 cm to 0.5 cm;</li>
<li>Refracting setup tool works better with origin shift.</li>
</ul>
<p>Lua:</p>
<ul>
<li>Server scripts:
<ul>
<li>Physics API is available without extended track physics now;</li>
<li>Scripts can access files for selected cars and track (can be used to change car skins live, for example);</li>
<li>Add new extras to that list with lightbulb in chat app for extra online features (either with popup dialogs or working as tools);</li>
<li>Add new extras for admins;</li>
<li>Get Steam ID for current player;</li>
<li>Set additional post-processing color corrections;</li>
<li>Access cars KN5 textures (to revert changes when switching skins);</li>
<li>Access some gameplay API (move camera around, toggle drivers, open car doors, set track conditions, switch car camera is focusing at and more);</li>
<li>For live reload, server scripts now loaded from “extension/lua/online” rather than track folder (server scripts got a separate library);</li>
<li>Listen to events of somebody connecting and disconnecting;</li>
</ul></li>
<li>Error messages in callbacks getting cut fixed;</li>
<li>Storage messing up values with commas fixed;</li>
<li>Several online events in one script not working properly fixed;</li>
<li>Transparent and tool windows always having that non-disableable padding fixed;</li>
<li>Car and track script configs now can refer to scripts in “extension/lua/cars” and “extension/lua/tracks” accordingly;</li>
<li>API to control particle emitters (smoke, flames, sparks) and detractors;</li>
<li>Information about car metadata like year or special features with functions to access car brand name and country;</li>
<li>Access information about currently playing music track, its cover and peak levels, play/pause and switch to the next or previous track;</li>
<li>Function to draw a race flag of a custom color with fullscreen HUDs;</li>
<li>Fullscreen HUDs no longer need to create transparent windows to draw things (but can still do it for simplifying general operation);</li>
<li>Online events now can set namespaces (so that Lua app can exchange data with an online script, for example);</li>
<li>Scriptable displays: functions to access dimenstions of a screen and the texture, a function to move driver eyes position (for moving the seat?);</li>
<li>Web API:
<ul>
<li>Upload binary files;</li>
<li>Limit for simulateous requests no longer creates an error, instead following requests are queued up;</li>
</ul></li>
<li>Scene API:
<ul>
<li>Use live textures with <code>ref:setMaterialTexture()</code> (videos, currently playing album cover);</li>
<li>Use asynchronous textures with <code>ref:setMaterialTexture()</code> (textures loaded from web or set with <code>ui.setAsynchronousImagesLoading(true)</code>);</li>
<li>Quickly apply a skin to a node, or reset a skin;</li>
<li>Access world tranformation of child nodes;</li>
<li>Access texture slots and material properties (number of, names, values);</li>
<li>Apply shader replacements from INIpp format configs;</li>
<li>Load and apply KsAnim animations;</li>
<li>Load and use remote KN5s and KsAnims;</li>
<li>Project textures onto models with optional masking and other options (or even custom shaders);</li>
<li>Make a shot of a some 3D meshes or nodes and use it as a texture or an image to draw in UI;</li>
</ul></li>
<li>Physics API:
<ul>
<li>Apply penalties;</li>
<li>Add forces to cars (invalidates laps);</li>
<li>Set tyres temperature and/or blankets, set car damage and fuel;</li>
<li>Override racing flag (including access to new flag types like ambulance or slippery warning);</li>
<li>Disable user controls;</li>
<li>Access state of user controls directly;</li>
<li>Change driver name and/or team during the race (for hot driver swaps);</li>
<li>Set engine RPM, activate and deactivate stalling;</li>
</ul></li>
<li>UI API:
<ul>
<li>Create separate canvases (render targers), draw things into them and then use them as textures, access their pixel colors, store data as images, backup and restore their state, apply anti-aliasing and more;</li>
<li>Apply blurring effect to drawn images;</li>
<li>New universal <code>ui.icon()</code> function which can draw 24×24 icons, flags, any other icons and custom icons (any other API method expecting icon now can take other ones too);</li>
<li>Add icons to previously drawn elements with <code>ui.addIcon()</code>;</li>
<li>Function <code>ui.atlasIcons()</code> to easily load compatible icons from atlases;</li>
<li>New functions to get image size and mouse wheel offset;</li>
<li>Store values and flags associated with UI elements;</li>
<li>DWrite fonts: load system fonts using “@System” for the path;</li>
<li>Media players: link playback rate to simulation speed, generate mips (great for setting videos as textures without dynamic textures);</li>
<li>Create custom tooltips with more than just text;</li>
<li>Create modal popup dialogs (the ones with blurred background);</li>
<li>Render textures with masks, custom blending mode and more using <code>ui.renderTexture()</code>;</li>
<li>Render custom shaders with bound textures and parameters using <code>ui.renderShader()</code> (shaders are compiled on-fly);</li>
<li>Pushing clipping rects fixed (now affects inputs as well);</li>
</ul></li>
<li>Lua apps:
<ul>
<li>Windows restoration on reloading fixed;</li>
<li>Window IDs are ensured to be unique now to avoid conflicts;</li>
<li>Special flag for app to work in lazy mode: no scripts would be loaded until app is opened, in full lazy mode scripts will get unloaded completely when app is closed;</li>
<li>New APIs to check window visibility, toggle windows, change window title, unload apps in background;</li>
<li>APIs to move onboard camera, change FOV, pitch and yaw (alters same values as that default onboard camera editor app allowing to create custom alternatives);</li>
<li>API to reload control settings live (only limitation is that input method can’t be changed);</li>
<li>Missing scrollbars are fixed now;</li>
<li>Monitor file system changes;</li>
<li>Control state of AI spline recorder: start and stop recording (allows to create AI splines without crossing finishing line);</li>
</ul></li>
<li>General API:
<ul>
<li>A few functions for strings with binary data (compression, struct-to-binary and binary-to-struct, base64, UTF-8-16 conversion);</li>
<li>Some functions, such as <code>io.save()</code> and <code>web.post()</code>, now work properly with binary strings (strings that contain zero bytes in them);</li>
<li>Strings passed back from C++ in callbacks now work properly with zero bytes as well (strings returned synchronously were working before);</li>
<li>Calculate checksum of a file (SHA-256, works asynchronously) or binary data (either XXH3 or SHA-256);</li>
<li>Encode and decode halfs (with support in <code>ac.StructItem</code> as well);</li>
<li>Create transforming matrices (translation, rotation, scaling);</li>
<li>Ray/plane raycasting;</li>
<li>Get list of files in a ZIP array;</li>
<li>Load and save files asynchronously;</li>
<li>Events shared between all running scripts;</li>
<li>Additional functions to access state of controls and gamepads, as well as number of connected controls, their names and capabilities;</li>
<li>Get pen pressure with Windows Ink API;</li>
<li>Functions to parse and serialize INI files in AC or CSP compatible formats;</li>
</ul></li>
<li>Default extension in UI dialogs fixed;</li>
<li>VS extension updated to support auto-detect of car physics scripts;</li>
<li>Unless specifically configured, display scripts for other cars will not get loaded at all until needed;</li>
<li>VS Code plugin updated, now increases “preloadFileSize” setting automatically (in workspace only);</li>
<li>Remote images now cached in accordance with HTTP rules (“Last-Modified”, “ETag”, “Cache-Control”, etc.).</li>
</ul></div><h4 class="version-block-links-title">Links:</h4><ul class="version-block-links"><li><span>Download: </span><a download="lights-patch-v0.1.77.zip" href="https://acstuff.ru/patch/?get=0.1.77">lights-patch-v0.1.77.zip</a></li></ul></div></body></html>